<div class="flex justify-between items-center" style="margin-bottom: 2rem;">
  <h2>All Reservations</h2>
  <button class="btn" routerLink="/reservations/new">Book a Room</button>
</div>

<div *ngIf="reservations.length === 0" style="text-align: center; color: var(--text-secondary); margin-top: 3rem;">
  <h3>No reservations found.</h3>
  <p>Be the first to book a room!</p>
</div>

<div class="card-grid">
  <div class="card glass-panel" *ngFor="let r of reservations" [ngStyle]="{'borderColor': r.type === 'BUFFER' ? 'var(--info-color)' : 'var(--glass-border)'}">
    <div class="flex justify-between items-center" style="margin-bottom: 1rem;">
      <span class="badge" [ngClass]="r.type === 'BUFFER' ? 'badge-warning' : 'badge-primary'">
        {{ r.type }}
      </span>
      <span style="font-size: 0.85rem; color: var(--text-secondary);">
        ID #{{ r.id }}
      </span>
    </div>

    <h3 style="margin-bottom: 0.5rem; color: var(--primary-color);">{{ r.activity }}</h3>
    <p style="margin-bottom: 0.25rem;"><strong>By:</strong> {{ r.user?.name || 'TSP System' }}</p>
    
    <div style="background: rgba(0,0,0,0.2); padding: 0.75rem; border-radius: 8px; margin: 1rem 0;">
      <div class="flex justify-between" style="font-size: 0.9rem; margin-bottom: 0.5rem;">
        <span style="color: var(--text-secondary)">Start:</span>
        <span>{{ r.startTime | date:'medium' }}</span>
      </div>
      <div class="flex justify-between" style="font-size: 0.9rem;">
        <span style="color: var(--text-secondary)">End:</span>
        <span>{{ r.endTime | date:'medium' }}</span>
      </div>
    </div>

    <div *ngIf="r.type !== 'BUFFER'" style="font-size: 0.9rem; margin-bottom: 1rem;">
      <p style="margin-bottom: 0.25rem;"><strong>HW:</strong> {{ r.hardware }}</p>
      <p><strong>SW:</strong> {{ r.software }}</p>
    </div>

    <div class="flex gap-1" *ngIf="canModify(r)" style="margin-top: 1.5rem;">
      <button class="btn btn-secondary" style="flex:1" (click)="editReservation(r.id)">Edit</button>
      <button class="btn btn-danger" style="flex:1" (click)="deleteReservation(r.id)">Cancel</button>
    </div>
  </div>
</div>
